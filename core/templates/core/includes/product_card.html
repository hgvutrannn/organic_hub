{% load static %}
<div class="col-lg-3 col-md-4 col-sm-6">
    <div class="card border-0 shadow-sm rounded-4 h-100 product-card-home">
        <!-- Product Image -->
        <div class="position-relative">
            {% if product.get_primary_image %}
                <img src="{{ product.get_primary_image.url }}" 
                     alt="{{ product.name }}" 
                     class="card-img-top square-image" 
                     style="width: 100%; aspect-ratio: 1 / 1; object-fit: cover; object-position: center;">
            {% else %}
                <img src="{% static 'images/no-image.jpg' %}" 
                     alt="{{ product.name }}" 
                     class="card-img-top square-image" 
                     style="width: 100%; aspect-ratio: 1 / 1; object-fit: cover; object-position: center;">
            {% endif %}
            
            <!-- View Count -->
            <div class="position-absolute top-0 start-0 m-2">
                <span class="badge bg-dark bg-opacity-75 rounded-pill">
                    <i class="fas fa-eye me-1"></i>{{ product.view_count }}
                </span>
            </div>
        </div>
        
        <!-- Product Info -->
        <div class="card-body d-flex flex-column">
            <!-- Category Badge -->
            <div class="mb-2">
                <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill">
                    {{ product.category.name|default:"Uncategorized" }}
                </span>
            </div>
            
            <!-- Product Title -->
            <h5 class="card-title fw-bold mb-2">
                <a href="{% url 'product_detail' product.product_id %}" 
                   class="text-decoration-none text-dark stretched-link">
                    {{ product.name|truncatechars:50 }}
                </a>
            </h5>
            
            <!-- Price -->
            <div class="mb-3">
                <span class="h5 fw-bold text-success mb-0">
                    Â£{{ product.display_price|floatformat:2 }}
                </span>
            </div>
            
            <!-- Description -->
            {% if product.description %}
                <p class="card-text text-muted small flex-grow-1">
                    {{ product.description|truncatewords:15 }}
                </p>
            {% endif %}
        </div>
    </div>
</div>

