<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Performance Benchmark Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .summary-card {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .summary-card h3 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 14px;
            text-transform: uppercase;
        }
        .summary-card .value {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #4CAF50;
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .chart-container {
            margin: 30px 0;
            height: 400px;
            position: relative;
        }
        .faster {
            color: #4CAF50;
            font-weight: bold;
        }
        .slower {
            color: #f44336;
            font-weight: bold;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 12px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Search Performance Benchmark Report</h1>
        <p><strong>Generated:</strong> 2025-11-21 17:41:57</p>
        
        <h2>Summary</h2>
        <div class="summary">
            <div class="summary-card">
                <h3>Total Test Cases</h3>
                <div class="value">12</div>
            </div>
            <div class="summary-card">
                <h3>Iterations per Test</h3>
                <div class="value">10</div>
            </div>
        </div>
        
        <h2>Execution Time Comparison (ms)</h2>
        <div class="chart-container">
            <canvas id="timeChart"></canvas>
        </div>
        
        <h2>Memory Usage Comparison (MB)</h2>
        <div class="chart-container">
            <canvas id="memoryChart"></canvas>
        </div>
        
        <h2>CPU Usage Comparison (%)</h2>
        <div class="chart-container">
            <canvas id="cpuChart"></canvas>
        </div>
        
        <h2>Detailed Results</h2>
        <table>
            <thead>
                <tr>
                    <th>Test Case</th>
                    <th>Method</th>
                    <th>Avg Time (ms)</th>
                    <th>Min Time (ms)</th>
                    <th>Max Time (ms)</th>
                    <th>Memory (MB)</th>
                    <th>CPU (%)</th>
                    <th>Results</th>
                </tr>
            </thead>
            <tbody>

                <tr>
                    <td rowspan="2"><strong>Text Search - Short (gạo)</strong><br><small>Query: gạo<br>Filters: None</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>180.26</td>
                    <td>119.65</td>
                    <td>298.67</td>
                    <td>15.36</td>
                    <td>-0.02</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>66.83 (0.37x slower)</td>
                    <td>49.34</td>
                    <td>69.96</td>
                    <td>0.04</td>
                    <td>-0.02</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Text Search - Short (rau)</strong><br><small>Query: rau<br>Filters: None</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>185.18</td>
                    <td>161.55</td>
                    <td>272.45</td>
                    <td>0.23</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>65.46 (0.35x slower)</td>
                    <td>53.15</td>
                    <td>76.11</td>
                    <td>0.04</td>
                    <td>-0.02</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Text Search - Long (gạo hữu cơ)</strong><br><small>Query: gạo hữu cơ<br>Filters: None</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>186.69</td>
                    <td>151.20</td>
                    <td>280.62</td>
                    <td>0.11</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>68.58 (0.37x slower)</td>
                    <td>53.99</td>
                    <td>71.85</td>
                    <td>0.02</td>
                    <td>-0.07</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Text Search - Long (rau củ quả tươi)</strong><br><small>Query: rau củ quả tươi<br>Filters: None</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>197.92</td>
                    <td>141.70</td>
                    <td>278.97</td>
                    <td>0.21</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>66.00 (0.33x slower)</td>
                    <td>42.24</td>
                    <td>72.92</td>
                    <td>0.01</td>
                    <td>0.00</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Text Search - No Results</strong><br><small>Query: xyzabc123nonexistent<br>Filters: None</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>25.88</td>
                    <td>16.20</td>
                    <td>32.50</td>
                    <td>0.00</td>
                    <td>0.00</td>
                    <td>0</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>53.03 (2.05x faster)</td>
                    <td>34.45</td>
                    <td>58.00</td>
                    <td>0.00</td>
                    <td>0.00</td>
                    <td>0</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Filter - Category Only</strong><br><small>Query: N/A<br>Filters: {"category_id": 13, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>164.48</td>
                    <td>125.11</td>
                    <td>256.39</td>
                    <td>0.09</td>
                    <td>-0.04</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>58.56 (0.36x slower)</td>
                    <td>39.82</td>
                    <td>163.53</td>
                    <td>0.03</td>
                    <td>-0.01</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Filter - Certificate Only</strong><br><small>Query: N/A<br>Filters: {"certificate_id": 12, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>156.18</td>
                    <td>124.75</td>
                    <td>254.93</td>
                    <td>0.13</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>43.59 (0.28x slower)</td>
                    <td>36.48</td>
                    <td>47.38</td>
                    <td>0.36</td>
                    <td>0.00</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Filter - Price Range Only</strong><br><small>Query: N/A<br>Filters: {"min_price": 50000, "max_price": 100000, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>168.71</td>
                    <td>119.94</td>
                    <td>265.32</td>
                    <td>0.26</td>
                    <td>-0.06</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>55.27 (0.33x slower)</td>
                    <td>34.32</td>
                    <td>70.95</td>
                    <td>-0.00</td>
                    <td>-0.02</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Filter - Category + Certificate + Price</strong><br><small>Query: N/A<br>Filters: {"category_id": 13, "certificate_id": 12, "min_price": 50000, "max_price": 200000, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>180.16</td>
                    <td>125.00</td>
                    <td>286.86</td>
                    <td>0.02</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>26.79 (0.15x slower)</td>
                    <td>15.66</td>
                    <td>33.28</td>
                    <td>0.04</td>
                    <td>0.00</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Combined - Text + Category</strong><br><small>Query: gạo<br>Filters: {"category_id": 13, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>174.90</td>
                    <td>121.47</td>
                    <td>295.60</td>
                    <td>0.11</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>43.35 (0.25x slower)</td>
                    <td>26.78</td>
                    <td>50.67</td>
                    <td>-0.24</td>
                    <td>-0.01</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Combined - Text + Certificate</strong><br><small>Query: hữu cơ<br>Filters: {"certificate_id": 12, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>183.06</td>
                    <td>158.26</td>
                    <td>274.20</td>
                    <td>0.29</td>
                    <td>-0.03</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>37.79 (0.21x slower)</td>
                    <td>30.49</td>
                    <td>42.81</td>
                    <td>0.01</td>
                    <td>0.00</td>
                    <td>1000</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Combined - Text + Category + Certificate + Price</strong><br><small>Query: rau<br>Filters: {"category_id": 13, "certificate_id": 12, "min_price": 30000, "max_price": 150000, "is_active": true}</small></td>
                    <td><span style="color: #2196F3;">Elasticsearch</span></td>
                    <td>10.83</td>
                    <td>8.21</td>
                    <td>15.75</td>
                    <td>0.00</td>
                    <td>-0.01</td>
                    <td>0</td>
                </tr>

                <tr>
                    <td><span style="color: #FF9800;">Django ORM</span></td>
                    <td>10.36 (0.96x slower)</td>
                    <td>8.72</td>
                    <td>12.91</td>
                    <td>0.00</td>
                    <td>-0.01</td>
                    <td>0</td>
                </tr>

            </tbody>
        </table>
        
        <div class="footer">
            <p>Generated by Search Performance Benchmark Script</p>
        </div>
    </div>
    
    <script>
        // Chart.js configuration
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            }
        };
        
        // Execution Time Chart
        const timeCtx = document.getElementById('timeChart').getContext('2d');
        new Chart(timeCtx, {
            type: 'bar',
            data: {
                labels: ["Text Search - Short (g\u1ea1o)", "Text Search - Short (rau)", "Text Search - Long (g\u1ea1o h\u1eefu c\u01a1)", "Text Search - Long (rau c\u1ee7 qu\u1ea3 t\u01b0\u01a1i)", "Text Search - No Results", "Filter - Category Only", "Filter - Certificate Only", "Filter - Price Range Only", "Filter - Category + Certificate + Price", "Combined - Text + Category", "Combined - Text + Certificate", "Combined - Text + Category + Certificate + Price"],
                datasets: [{
                    label: 'Elasticsearch',
                    data: [180.2553663008439, 185.18077490080032, 186.68582079917542, 197.91618739982368, 25.87594589931541, 164.48180840015993, 156.1822250005207, 168.71406650170684, 180.1628334003908, 174.89801259871456, 183.06157089973567, 10.83421660005115],
                    backgroundColor: 'rgba(33, 150, 243, 0.7)',
                    borderColor: 'rgba(33, 150, 243, 1)',
                    borderWidth: 1
                }, {
                    label: 'Django ORM',
                    data: [66.82846269977745, 65.46262920019217, 68.57709600008093, 65.99912909950945, 53.030233598838095, 58.55542070130468, 43.588033398555126, 55.266345900599845, 26.788471000327263, 43.350108301092405, 37.787116698746104, 10.36085400119191],
                    backgroundColor: 'rgba(255, 152, 0, 0.7)',
                    borderColor: 'rgba(255, 152, 0, 1)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });
        
        // Memory Usage Chart
        const memoryCtx = document.getElementById('memoryChart').getContext('2d');
        new Chart(memoryCtx, {
            type: 'bar',
            data: {
                labels: ["Text Search - Short (g\u1ea1o)", "Text Search - Short (rau)", "Text Search - Long (g\u1ea1o h\u1eefu c\u01a1)", "Text Search - Long (rau c\u1ee7 qu\u1ea3 t\u01b0\u01a1i)", "Text Search - No Results", "Filter - Category Only", "Filter - Certificate Only", "Filter - Price Range Only", "Filter - Category + Certificate + Price", "Combined - Text + Category", "Combined - Text + Certificate", "Combined - Text + Category + Certificate + Price"],
                datasets: [{
                    label: 'Elasticsearch',
                    data: [15.3578125, 0.225, 0.1140625, 0.2078125, 0.0, 0.0921875, 0.1328125, 0.259375, 0.015625, 0.1125, 0.2875, 0.0],
                    backgroundColor: 'rgba(33, 150, 243, 0.7)',
                    borderColor: 'rgba(33, 150, 243, 1)',
                    borderWidth: 1
                }, {
                    label: 'Django ORM',
                    data: [0.0375, 0.040625, 0.0171875, 0.0109375, 0.0, 0.0265625, 0.3625, -0.0015625, 0.04375, -0.240625, 0.0078125, 0.0],
                    backgroundColor: 'rgba(255, 152, 0, 0.7)',
                    borderColor: 'rgba(255, 152, 0, 1)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });
        
        // CPU Usage Chart
        const cpuCtx = document.getElementById('cpuChart').getContext('2d');
        new Chart(cpuCtx, {
            type: 'bar',
            data: {
                labels: ["Text Search - Short (g\u1ea1o)", "Text Search - Short (rau)", "Text Search - Long (g\u1ea1o h\u1eefu c\u01a1)", "Text Search - Long (rau c\u1ee7 qu\u1ea3 t\u01b0\u01a1i)", "Text Search - No Results", "Filter - Category Only", "Filter - Certificate Only", "Filter - Price Range Only", "Filter - Category + Certificate + Price", "Combined - Text + Category", "Combined - Text + Certificate", "Combined - Text + Category + Certificate + Price"],
                datasets: [{
                    label: 'Elasticsearch',
                    data: [-0.02, -0.030000000000000002, -0.030000000000000002, -0.030000000000000002, 0.0, -0.04, -0.030000000000000002, -0.060000000000000005, -0.030000000000000002, -0.030000000000000002, -0.030000000000000002, -0.01],
                    backgroundColor: 'rgba(33, 150, 243, 0.7)',
                    borderColor: 'rgba(33, 150, 243, 1)',
                    borderWidth: 1
                }, {
                    label: 'Django ORM',
                    data: [-0.02, -0.02, -0.07, 0.0, 0.0, -0.01, 0.0, -0.02, 0.0, -0.01, 0.0, -0.01],
                    backgroundColor: 'rgba(255, 152, 0, 0.7)',
                    borderColor: 'rgba(255, 152, 0, 1)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });
    </script>
</body>
</html>
